<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#F5F5F5">

    <!-- Loading Indicator (NEW) -->
    <ProgressBar
        android:id="@+id/loadingProgress"
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:layout_gravity="center"
        android:indeterminateTint="#D4AF37"
        android:visibility="gone" />

    <!-- Main Content (Wrapped in LinearLayout with ID) -->
    <ScrollView
        android:id="@+id/contentLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical">

            <!-- Header with Dark Background -->
            <RelativeLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#1A1A1A"
                android:paddingBottom="16dp">

                <!-- Top Bar with Back, Info, and Complete Icons -->
                <LinearLayout
                    android:id="@+id/topBar"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:layout_marginTop="15dp"
                    android:padding="16dp"
                    android:gravity="center_vertical">

                    <ImageView
                        android:id="@+id/backButton"
                        android:layout_width="32dp"
                        android:layout_height="32dp"
                        android:padding="4dp"
                        android:src="@drawable/ic_back"
                        android:tint="#FFFFFF"
                        android:contentDescription="Back" />

                    <View
                        android:layout_width="0dp"
                        android:layout_height="1dp"
                        android:layout_weight="1" />

                    <!-- Mark as Complete Checkbox -->
                    <LinearLayout
                        android:id="@+id/completeLayout"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal"
                        android:gravity="center_vertical"
                        android:layout_marginEnd="12dp"
                        android:background="@drawable/complete_button_background"
                        android:paddingHorizontal="12dp"
                        android:paddingVertical="6dp">

                        <CheckBox
                            android:id="@+id/completeCheckbox"
                            android:layout_width="24dp"
                            android:layout_height="24dp"
                            android:button="@drawable/checkbox_gold_selector"
                            android:contentDescription="Mark Complete" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginStart="6dp"
                            android:text="Complete"
                            android:textColor="#D4AF37"
                            android:textSize="12sp"
                            android:textStyle="bold" />
                    </LinearLayout>

                    <ImageView
                        android:id="@+id/infoButton"
                        android:layout_width="32dp"
                        android:layout_height="32dp"
                        android:padding="4dp"
                        android:src="@drawable/ic_info"
                        android:tint="#FFFFFF"
                        android:contentDescription="Info" />
                </LinearLayout>

                <!-- Day and Surah Info -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_below="@id/topBar"
                    android:orientation="vertical"
                    android:paddingHorizontal="16dp">

                    <TextView
                        android:id="@+id/dayAndSurahText"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Day 3 â€¢ Surah 2"
                        android:textColor="#FFFFFF"
                        android:textSize="14sp"
                        android:alpha="0.8" />

                    <TextView
                        android:id="@+id/lessonTitleText"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="4dp"
                        android:text="Al-Baqarah (21-39)"
                        android:textColor="#FFFFFF"
                        android:textSize="24sp"
                        android:textStyle="bold" />
                </LinearLayout>
            </RelativeLayout>

            <!-- Content Section -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="16dp">

                <!-- Theme Card -->
                <androidx.cardview.widget.CardView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="16dp"
                    app:cardCornerRadius="12dp"
                    app:cardElevation="2dp"
                    app:cardBackgroundColor="#FFFFFF">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:padding="16dp">

                        <LinearLayout
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:gravity="center_vertical">

                            <ImageView
                                android:layout_width="20dp"
                                android:layout_height="20dp"
                                android:src="@drawable/ic_theme"
                                android:tint="#D4AF37"
                                android:contentDescription="Theme" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginStart="8dp"
                                android:text="Theme"
                                android:textColor="#D4AF37"
                                android:textSize="14sp"
                                android:textStyle="bold" />
                        </LinearLayout>

                        <TextView
                            android:id="@+id/themeDescriptionText"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="8dp"
                            android:text="Evidence of Allah's Existence and Adam's Story"
                            android:textColor="#1A1A1A"
                            android:textSize="14sp"
                            android:lineSpacingExtra="2dp" />
                    </LinearLayout>
                </androidx.cardview.widget.CardView>

                <!-- Scholar's Guide Card -->
                <androidx.cardview.widget.CardView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="16dp"
                    app:cardCornerRadius="12dp"
                    app:cardElevation="2dp"
                    app:cardBackgroundColor="#FFFBF0">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal"
                        android:padding="16dp"
                        android:gravity="center_vertical">

                        <ImageView
                            android:layout_width="48dp"
                            android:layout_height="48dp"
                            android:src="@drawable/profile"
                            android:scaleType="centerCrop"
                            android:contentDescription="Scholar" />

                        <LinearLayout
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:layout_marginStart="12dp"
                            android:orientation="vertical">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Scholar's Guide"
                                android:textColor="#1A1A1A"
                                android:textSize="14sp"
                                android:textStyle="bold" />

                            <TextView
                                android:id="@+id/scholarQuoteText"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="4dp"
                                android:text="Reflect deeply on these verses. They contain secrets for a peaceful heart."
                                android:textColor="#666666"
                                android:textSize="12sp"
                                android:fontFamily="serif"
                                android:lineSpacingExtra="2dp" />
                        </LinearLayout>
                    </LinearLayout>
                </androidx.cardview.widget.CardView>

                <!-- Tafseer Explanation Section -->
                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Tafseer Explanation"
                    android:textColor="#1A1A1A"
                    android:textSize="16sp"
                    android:textStyle="bold"
                    android:layout_marginBottom="12dp" />

                <TextView
                    android:id="@+id/tafseerText"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="16dp"
                    android:text="Allah presents clear signs of His existence through creation: the earth, the sky, rain, and the fruits it produces. He challenges humanity to produce something similar to the Quran if they doubt its divine origin. The story of Adam teaches us about human dignity, knowledge, and the beginning of human stewardship on earth. The angels' prostration to Adam demonstrates human potential when guided by divine knowledge. Satan's refusal due to arrogance reveals the root of all evil and disobedience."
                    android:textColor="#4A4A4A"
                    android:textSize="14sp"
                    android:lineSpacingExtra="4dp" />

                <!-- Key Takeaways Section -->
                <androidx.cardview.widget.CardView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="16dp"
                    app:cardCornerRadius="12dp"
                    app:cardElevation="2dp"
                    app:cardBackgroundColor="#F8F8F8">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:padding="16dp">

                        <LinearLayout
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:gravity="center_vertical"
                            android:layout_marginBottom="12dp">

                            <ImageView
                                android:layout_width="20dp"
                                android:layout_height="20dp"
                                android:src="@drawable/ic_key"
                                android:tint="#666666"
                                android:contentDescription="Key" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginStart="8dp"
                                android:text="Key Takeaways"
                                android:textColor="#1A1A1A"
                                android:textSize="14sp"
                                android:textStyle="bold" />
                        </LinearLayout>

                        <!-- Takeaway 1 -->
                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:layout_marginBottom="8dp">

                            <View
                                android:layout_width="6dp"
                                android:layout_height="6dp"
                                android:layout_marginTop="6dp"
                                android:layout_marginEnd="12dp"
                                android:background="@drawable/bullet_point" />

                            <TextView
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:text="Creation itself is evidence of the Creator"
                                android:textColor="#4A4A4A"
                                android:textSize="13sp"
                                android:lineSpacingExtra="2dp" />
                        </LinearLayout>

                        <!-- Takeaway 2 -->
                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:layout_marginBottom="8dp">

                            <View
                                android:layout_width="6dp"
                                android:layout_height="6dp"
                                android:layout_marginTop="6dp"
                                android:layout_marginEnd="12dp"
                                android:background="@drawable/bullet_point" />

                            <TextView
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:text="The Quran's linguistic miracle remains unchallenged"
                                android:textColor="#4A4A4A"
                                android:textSize="13sp"
                                android:lineSpacingExtra="2dp" />
                        </LinearLayout>

                        <!-- Takeaway 3 -->
                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:layout_marginBottom="8dp">

                            <View
                                android:layout_width="6dp"
                                android:layout_height="6dp"
                                android:layout_marginTop="6dp"
                                android:layout_marginEnd="12dp"
                                android:background="@drawable/bullet_point" />

                            <TextView
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:text="Knowledge elevates human status above angels"
                                android:textColor="#4A4A4A"
                                android:textSize="13sp"
                                android:lineSpacingExtra="2dp" />
                        </LinearLayout>

                        <!-- Takeaway 4 -->
                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal">

                            <View
                                android:layout_width="6dp"
                                android:layout_height="6dp"
                                android:layout_marginTop="6dp"
                                android:layout_marginEnd="12dp"
                                android:background="@drawable/bullet_point" />

                            <TextView
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:text="Pride and arrogance lead to downfall"
                                android:textColor="#4A4A4A"
                                android:textSize="13sp"
                                android:lineSpacingExtra="2dp" />
                        </LinearLayout>
                    </LinearLayout>
                </androidx.cardview.widget.CardView>

                <!-- Watch Video Button (Full Width at Bottom) -->
                <Button
                    android:id="@+id/playButton"
                    android:layout_width="match_parent"
                    android:layout_height="56dp"
                    android:layout_marginTop="8dp"
                    android:layout_marginBottom="16dp"
                    android:text="Watch Video Lesson"
                    android:textColor="#D4AF37"
                    android:textSize="15sp"
                    android:textStyle="bold"
                    android:textAllCaps="false"
                    android:backgroundTint="#1A1A1A"
                    android:drawableLeft="@drawable/ic_play"
                    android:drawableTint="#D4AF37"
                    android:drawablePadding="8dp"
                    android:gravity="center"
                    app:cornerRadius="12dp" />

                <!-- Navigation Buttons -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:layout_marginTop="8dp"
                    android:layout_marginBottom="16dp">

                    <com.google.android.material.button.MaterialButton
                        android:id="@+id/previousDayButton"
                        android:layout_width="0dp"
                        android:layout_height="56dp"
                        android:layout_weight="1"
                        android:layout_marginEnd="8dp"
                        android:text="Previous Day"
                        android:textColor="#1A1A1A"
                        android:textSize="14sp"
                        android:textAllCaps="false"
                        style="@style/Widget.MaterialComponents.Button.OutlinedButton"
                        app:strokeColor="#DDDDDD"
                        app:strokeWidth="1dp"
                        app:cornerRadius="12dp" />

                    <Button
                        android:id="@+id/nextDayButton"
                        android:layout_width="0dp"
                        android:layout_height="56dp"
                        android:layout_weight="1"
                        android:layout_marginStart="8dp"
                        android:text="Next Day"
                        android:textColor="#D4AF37"
                        android:textSize="14sp"
                        android:textStyle="bold"
                        android:textAllCaps="false"
                        android:backgroundTint="#1A1A1A"
                        app:cornerRadius="12dp" />
                </LinearLayout>
            </LinearLayout>
        </LinearLayout>
    </ScrollView>
</androidx.coordinatorlayout.widget.CoordinatorLayout>